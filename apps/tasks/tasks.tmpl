{{>main_header}}

{{# obj.class == "task" || obj.class == "app" }}
  <div class="tasks">
    <h3>tasks <span class="badge badge-inverse">{{ tasks.length }}</span></h3>

    {{#statusChoices}}
      {{# (tasksByStatus(.) || []).length > 0 }}
        {{.}} <span class="badge">{{(tasksByStatus(.) || []).length}}</span>
        <ul>
          {{# tasksByStatus(.) }}
            <li intro="fade:slow" class="{{ .ident == obj.ident ? 'current' : '' }}">
              <a href="#{{.ident}}">{{.title}}</a>
            </li>
          {{/ tasksByStatus(.) }}
        </ul>
      {{/ (tasksByStatus(.) || []).length > 0 }}
    {{/statusChoices}}
  </div>

  {{#obj}}
    {{# .class == "task" }}
      {{>taskPanel}}
    {{/ .class == "task" }}
  {{/obj}}
{{/ obj.class == "task" || obj.class == "app" }}

{{# obj.class != "task" && obj.class != "app" }}
  <div class="main">
    {{#obj}}{{>__object}}{{/obj}}
  </div>
{{/}}

{{>main_footer}}
