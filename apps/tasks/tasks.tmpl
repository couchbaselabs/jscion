{{>main_header}}

<div class="main">
{{# obj.class == "task" || obj.class == "app" }}
  <h1>tasks: {{ tasks.length }}</h1>
  <input on-change="newTask" class="newTask"
         placeholder="what needs to be done or fixed?"/>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3">
        <ul>
          {{#tasks}}
            <li intro="fade:slow"><a on-click="showTask" id="{{.createdAt}}">{{.title}}</a></li>
          {{/tasks}}
        </ul>
      </div>
      <div class="span7">
        {{#obj}}
          {{# .class == "task" }}
            <div class="task">
              <div>
                <div class="control">
                  <button class="btn" on-click="toggleEdit">{{ edit ? 'cancel edit' : 'edit' }}</button>
                </div>
                {{^edit}}{{.title}}{{/edit}}
                {{#edit}}<input value="{{.title}}"/>{{/edit}}
              </div>
              <div>status: {{.status}}</div>
              <div>created at: {{.createdAt}}</div>
              <div>updated at: {{.updatedAt}}</div>
              <div>description:
                {{^edit}}{{.description}}{{/edit}}
                {{#edit}}<textarea>{{.description}}</textarea>{{/edit}}
              </div>
              <div>
                <div class="control">
                  <button class="btn" on-click="toggleComment">{{ comment ? 'cancel' : 'add' }} comment</button>
                </div>
                comments:
              </div>
              {{#comment}}
                <div>
                  <textarea placeholder="your comment here"></textarea>
                </div>
              {{/comment}}
              <div>
                <ul>
                  {{#.messages}}
                    <li>{{>taskMessage}}</li>
                  {{/.messages}}
                </ul>
              </div>
            </div>
          {{/}}
        {{/obj}}
      </div>
    </div>
  </div>
{{/}}

{{# obj.class != "task" && obj.class != "app" }}
  {{#obj}}{{>__object}}{{/obj}}
{{/}}
</div>

{{>main_footer}}
