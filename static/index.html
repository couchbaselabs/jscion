<html>
<head>
<title>jscion</title>
</head>
<body>
<style>
.object label {
  display: inline-block;
  min-width: 8em;
  text-align: right;
  margin-right: 1em;
}
.object label:after {
  content:":";
}
.object ul, ul.object {
  list-style: none;
}
ul.object {
  padding: 1em 0 1em 0;
  border: 1px solid #888;
}
</style>
<div id="container"></div>
<script src="js/underscore-1.5.2.min.js"></script>
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/jscion.js"></script>
<script>
var g_ctx;

$(function() {
  $.ajax({ url: "/data.json",
           dataType: "json",
           success: function(data) {
             g_ctx = jsion(data);
             redraw();
           }
         });
});

$(window).bind('hashchange', redraw);

function redraw() {
  var ident = window.location.hash ? window.location.hash.substring(1) : null;
  var r = g_ctx.renderIdent(ident || "invoice-0001");
  var h = r.err || r.result || "no render result";
  $("#container").html(h);
}
</script>
</body>
</html>
