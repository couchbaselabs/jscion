<html>
<head>
  <title>jscion</title>
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link href="jscion.css" rel="stylesheet" media="screen">
</head>
<body>
<div id="container"></div>
<script src="js/underscore-1.5.2.min.js"></script>
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/jscion.js"></script>
<script>
var g_ctx;

$(function() {
  $.ajax({ url: "/data.json",
           dataType: "json",
           success: function(data) { g_ctx = jsion(data); redraw(); }
         });
});

$(window).bind('hashchange', redraw);

function redraw() {
  var ident = window.location.hash ? window.location.hash.substring(1) : null;
  var r = g_ctx.renderIdent(ident || "invoice-0001");
  var h = r.err || r.result || "no render result";
  $("#container").html(h);
}
</script>
<script src="bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
